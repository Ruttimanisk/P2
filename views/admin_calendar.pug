extends layout_admin

block content
    h1 Vagtplan

    // CSS for Resource Timeline
    link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/@fullcalendar/resource-timeline/index.global.min.css')

    // Scripts: FullCalendar Core + Plugins
    script(src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.8/index.global.min.js')
    script(src='https://cdn.jsdelivr.net/npm/@fullcalendar/resource-timeline@6.1.8/index.global.min.js')
    script(src='https://cdn.jsdelivr.net/npm/@fullcalendar/daygrid@6.1.8/index.global.min.js')
    script(src='https://cdn.jsdelivr.net/npm/@fullcalendar/interaction@6.1.8/index.global.min.js')

    // Calendar container
    div#calendar(style="max-width: 1000px; margin: 40px auto;")

    script.
        try {
            const events = !{events};
            const resources = !{resources};

            console.log("üí¨ Events:", events);
            console.log("üìã Resources:", resources);

            document.addEventListener('DOMContentLoaded', function () {
                var calendarEl = document.getElementById('calendar');
                var calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'resourceTimelineWeek',
                    plugins: [
                        FullCalendar.ResourceTimeline,
                        FullCalendar.DayGrid,
                        FullCalendar.Interaction
                    ],
                    slotMinTime: "07:00:00",
                    slotMaxTime: "20:00:00",
                    allDaySlot: false,
                    headerToolbar: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'resourceTimelineWeek,dayGridMonth'
                    },
                    resources: resources,
                    events: events
                });

                calendar.render();
            });
        } catch (err) {
            console.error("‚ùå Fejl i JSON:", err);
        }
